"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3190],{6928:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>a});var l=t(4848),r=t(5680);const i={},s="webpack-plugin",o={id:"webpack-resolve/Plugin",title:"webpack-plugin",description:"\u76ee\u7684",source:"@site/docs/webpack-resolve/Plugin.md",sourceDirName:"webpack-resolve",slug:"/webpack-resolve/Plugin",permalink:"/docs/webpack-resolve/Plugin",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"chunk",permalink:"/docs/webpack-resolve/Chunk"},next:{title:"README",permalink:"/docs/webpack-resolve/"}},c={},a=[{value:"\u76ee\u7684",id:"\u76ee\u7684",level:2},{value:"plugin \u539f\u7406",id:"plugin-\u539f\u7406",level:2},{value:"compiler \u548c compilation",id:"compiler-\u548c-compilation",level:2},{value:"compiler \u94a9\u5b50",id:"compiler-\u94a9\u5b50",level:2},{value:"compilation \u94a9\u5b50",id:"compilation-\u94a9\u5b50",level:2},{value:"\u7528\u6cd5",id:"\u7528\u6cd5",level:2},{value:"\u914d\u7f6e\u65b9\u5f0f",id:"\u914d\u7f6e\u65b9\u5f0f",level:3},{value:"Node API \u65b9\u5f0f",id:"node-api-\u65b9\u5f0f",level:3},{value:"\u5982\u4f55\u5199\u4e00\u4e2a\u63d2\u4ef6",id:"\u5982\u4f55\u5199\u4e00\u4e2a\u63d2\u4ef6",level:2},{value:"\u4e00\u4e2a\u7b80\u5355 Analyze \u63d2\u4ef6",id:"\u4e00\u4e2a\u7b80\u5355-analyze-\u63d2\u4ef6",level:2},{value:"\u786e\u8ba4\u6267\u884c\u9636\u6bb5",id:"\u786e\u8ba4\u6267\u884c\u9636\u6bb5",level:3},{value:"\u83b7\u53d6\u5206\u6790\u6570\u636e",id:"\u83b7\u53d6\u5206\u6790\u6570\u636e",level:3},{value:"\u5c55\u793a\u6570\u636e",id:"\u5c55\u793a\u6570\u636e",level:3}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.RP)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"webpack-plugin",children:"webpack-plugin"}),"\n",(0,l.jsx)(n.h2,{id:"\u76ee\u7684",children:"\u76ee\u7684"}),"\n",(0,l.jsxs)(n.p,{children:["\u63d2\u4ef6\u76ee\u7684\u5728\u4e8e\u89e3\u51b3  loader \u65e0\u6cd5\u5b9e\u73b0\u7684",(0,l.jsx)(n.strong,{children:"\u5176\u4ed6\u4e8b"})]}),"\n",(0,l.jsx)(n.h2,{id:"plugin-\u539f\u7406",children:"plugin \u539f\u7406"}),"\n",(0,l.jsx)(n.p,{children:"Webpack \u7684\u63d2\u4ef6\u673a\u5236\uff0c\u662f\u4e00\u79cd\u4e8b\u4ef6\u6d41\u7684\u673a\u5236\uff0c\u6309\u7167\u4e00\u5b9a\u7684\u987a\u5e8f\uff0c\u4f9d\u6b21\u89e6\u53d1\u5bf9\u5e94\u7684\u4e8b\u4ef6\u3002"}),"\n",(0,l.jsx)(n.p,{children:"webpack \u5185\u90e8\u4f7f\u7528 tapable \u62d3\u5c55\u4e86\u7c7b\uff0c\u7528\u6765\u6ce8\u518c\u548c\u8c03\u7528\u4e8b\u4ef6\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"// \u6ce8\u518c\u4e8b\u4ef6\nthis.hooks.emit.tap(compilation, err => { /* ... */ }); // \u6ce8\u518c\u540c\u6b65\u4e8b\u4ef6\nthis.hooks.emit.tapAsync(compilation, err => { /* ... */ }); // \u6ce8\u518c\u5f02\u6b65\u4e8b\u4ef6\n\n// \u8c03\u7528\u4e8b\u4ef6\nthis.hooks.emit.call(compilation, err => { /* ... */ }); // \u8c03\u7528\u540c\u6b65\u4e8b\u4ef6\nthis.hooks.emit.callAsync(compilation, err => { /* ... */ }); // \u8c03\u7528\u5f02\u6b65\u4e8b\u4ef6\n"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/webpack/tapable",children:"GitHub - webpack/tapable: Just a little module for plugins."})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Webpack \u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5728\u4e0d\u540c\u7684\u9636\u6bb5\uff0c\u4f1a\u8c03\u7528\u5bf9\u5e94\u7684\u4e8b\u4ef6\uff0c\u8fd9\u4fdd\u8bc1\u4e86\u63d2\u4ef6\u7684\u6709\u5e8f\u6027\u3002\u7528\u6237\u53ea\u9700\u8981\u6839\u636e\u6267\u884c\u9636\u6bb5\u5728\u5bf9\u5e94\u7684\u94a9\u5b50\u4e0a\u6ce8\u518c\u4e8b\u4ef6\u5373\u53ef\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"compiler-\u548c-compilation",children:"compiler \u548c compilation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Compiler"}),"\uff1a\u8be5\u5bf9\u8c61\u5305\u542b\u4e86 Webpack \u73af\u5883\u6240\u6709\u7684\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u5305\u542b options\u3001loaders \u548c plugins \u8fd9\u4e9b\u4fe1\u606f\uff0c\u4ee5\u53cawebpack\u6267\u884c\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u3002\u8fd9\u4e2a\u5bf9\u8c61\u5728 Webpack \u542f\u52a8\u65f6\u5019\u88ab\u5b9e\u4f8b\u5316\uff0c\u5b83\u662f\u5168\u5c40\u552f\u4e00\u7684\uff0c\u53ef\u4ee5\u7b80\u5355\u5730\u628a\u5b83\u7406\u89e3\u4e3a Webpack \u5b9e\u4f8b\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Compilation"}),"\uff1a\u8be5\u5bf9\u8c61\u5305\u542b\u4e86\u5f53\u524d\u7684\u6a21\u5757\u8d44\u6e90\u3001\u7f16\u8bd1\u751f\u6210\u8d44\u6e90\u3001\u53d8\u5316\u7684\u6587\u4ef6\u7b49\u3002\u5f53 Webpack \u4ee5\u5f00\u53d1\u6a21\u5f0f\u8fd0\u884c\u65f6\uff0c\u6bcf\u5f53\u68c0\u6d4b\u5230\u4e00\u4e2a\u6587\u4ef6\u53d8\u5316\uff0c\u4e00\u6b21\u65b0\u7684 Compilation \u5c06\u88ab\u521b\u5efa\u3002Compilation \u5bf9\u8c61\u4e5f\u63d0\u4f9b\u4e86\u5f88\u591a\u4e8b\u4ef6\u56de\u8c03\u4f9b\u63d2\u4ef6\u505a\u6269\u5c55\u3002\u901a\u8fc7 Compilation \u4e5f\u80fd\u8bfb\u53d6\u5230 Compiler \u5bf9\u8c61\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"compiler-\u94a9\u5b50",children:"compiler \u94a9\u5b50"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Compiler \u6a21\u5757\u662f webpack \u7684\u4e3b\u8981\u5f15\u64ce\uff0c\u5b83\u901a\u8fc7 CLI \u6216\u8005 Node API \u4f20\u9012\u7684\u6240\u6709\u9009\u9879\u521b\u5efa\u51fa\u4e00\u4e2a compilation \u5b9e\u4f8b\u3002\u5b83\u6269\u5c55\uff08extends\uff09\u81ea Tapable \u7c7b\uff0c\u7528\u6765\u6ce8\u518c\u548c\u8c03\u7528\u63d2\u4ef6\u3002 \u5927\u591a\u6570\u9762\u5411\u7528\u6237\u7684\u63d2\u4ef6\u4f1a\u9996\u5148\u5728 Compiler \u4e0a\u6ce8\u518c\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u8bbf\u95ee\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"compiler.hooks.someHook.tap('MyPlugin', (params) => {\n  /* ... */\n});\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u5177\u4f53\u7684\u94a9\u5b50\u8bf4\u660e\u53ef\u4ee5\u770b: ",(0,l.jsx)(n.a,{href:"https://webpack.docschina.org/api/compiler-hooks/#hooks",children:"compiler \u94a9\u5b50 | webpack \u4e2d\u6587\u6587\u6863"})]}),"\n",(0,l.jsx)(n.h2,{id:"compilation-\u94a9\u5b50",children:"compilation \u94a9\u5b50"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Compilation \u6a21\u5757\u4f1a\u88ab Compiler \u7528\u6765\u521b\u5efa\u65b0\u7684 compilation \u5bf9\u8c61\uff08\u6216\u65b0\u7684 build \u5bf9\u8c61\uff09\u3002 compilation \u5b9e\u4f8b\u80fd\u591f\u8bbf\u95ee\u6240\u6709\u7684\u6a21\u5757\u548c\u5b83\u4eec\u7684\u4f9d\u8d56\uff08\u5927\u90e8\u5206\u662f\u5faa\u73af\u4f9d\u8d56\uff09\u3002 \u5b83\u4f1a\u5bf9\u5e94\u7528\u7a0b\u5e8f\u7684\u4f9d\u8d56\u56fe\u4e2d\u6240\u6709\u6a21\u5757\uff0c \u8fdb\u884c\u5b57\u9762\u4e0a\u7684\u7f16\u8bd1(literal compilation)\u3002 \u5728\u7f16\u8bd1\u9636\u6bb5\uff0c\u6a21\u5757\u4f1a\u88ab\u52a0\u8f7d(load)\u3001\u5c01\u5b58(seal)\u3001\u4f18\u5316(optimize)\u3001 \u5206\u5757(chunk)\u3001\u54c8\u5e0c(hash)\u548c\u91cd\u65b0\u521b\u5efa(restore)\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u8bbf\u95ee\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"compilation.hooks.someHook.tap('MyPlugin', (params) => {\n  /* ... */\n});\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u5177\u4f53\u7684\u94a9\u5b50\u8bf4\u660e\u53ef\u4ee5\u770b:",(0,l.jsx)(n.a,{href:"https://webpack.docschina.org/api/compilation-hooks/",children:"compilation \u94a9\u5b50 | webpack \u4e2d\u6587\u6587\u6863"})]}),"\n",(0,l.jsx)(n.h2,{id:"\u7528\u6cd5",children:"\u7528\u6cd5"}),"\n",(0,l.jsx)(n.h3,{id:"\u914d\u7f6e\u65b9\u5f0f",children:"\u914d\u7f6e\u65b9\u5f0f"}),"\n",(0,l.jsx)(n.p,{children:"webapck.config.js"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const HtmlWebpackPlugin = require('html-webpack-plugin');\nconst webpack = require('webpack'); // \u8bbf\u95ee\u5185\u7f6e\u7684\u63d2\u4ef6\nconst path = require('path');\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    path: path.join(__dirname, './dist')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.(js|jsx)$/,\n        use: 'babel-loader',\n      },\n    ],\n  },\n  plugins: [\n    new webpack.ProgressPlugin(),\n    new HtmlWebpackPlugin({ template: './src/index.html' }),\n  ],\n};\n"})}),"\n",(0,l.jsx)(n.h3,{id:"node-api-\u65b9\u5f0f",children:"Node API \u65b9\u5f0f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const webpack = require('webpack'); // \u8bbf\u95ee webpack \u8fd0\u884c\u65f6(runtime)\nconst configuration = require('./webpack.config.js');\n\nlet compiler = webpack(configuration);\n\nnew webpack.ProgressPlugin().apply(compiler);\n\ncompiler.run(function (err, stats) {\n  // ...\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5982\u4f55\u5199\u4e00\u4e2a\u63d2\u4ef6",children:"\u5982\u4f55\u5199\u4e00\u4e2a\u63d2\u4ef6"}),"\n",(0,l.jsxs)(n.p,{children:["webpack \u5728\u6ce8\u518c\u65f6\uff0c\u6267\u884c\u63d2\u4ef6\u7684 apply \u65b9\u6cd5",(0,l.jsx)(n.code,{children:"plugin.apply(compiler)"}),"\u3002\u6240\u4ee5\u6211\u4eec\u5728\u5199\u63d2\u4ef6\u65f6\uff0c\u628a\u4e8b\u4ef6\u6ce8\u518c\u5199\u5728",(0,l.jsx)(n.code,{children:"apply"}),"\u5185\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const pluginName = 'ConsoleLogOnBuildWebpackPlugin';\n\nclass ConsoleLogOnBuildWebpackPlugin {\n  apply(compiler) {\n    compiler.hooks.run.tap(pluginName, (compilation) => {\n      console.log('webpack \u6784\u5efa\u6b63\u5728\u542f\u52a8\uff01');\n    });\n  }\n}\n\nmodule.exports = ConsoleLogOnBuildWebpackPlugin;\n"})}),"\n",(0,l.jsx)(n.p,{children:"Compiler hook \u7684 tap \u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5e94\u8be5\u662f\u9a7c\u5cf0\u5f0f\u547d\u540d\u7684\u63d2\u4ef6\u540d\u79f0\u3002\u5efa\u8bae\u4e3a\u6b64\u4f7f\u7528\u4e00\u4e2a\u5e38\u91cf\uff0c\u4ee5\u4fbf\u5b83\u53ef\u4ee5\u5728\u6240\u6709 hook \u4e2d\u91cd\u590d\u4f7f\u7528\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u4e00\u4e2a\u7b80\u5355-analyze-\u63d2\u4ef6",children:"\u4e00\u4e2a\u7b80\u5355 Analyze \u63d2\u4ef6"}),"\n",(0,l.jsx)(n.p,{children:"\u9996\u5148\u6211\u4eec\u9700\u8981\u5206\u6790\u4e00\u4e0b Analyze \u63d2\u4ef6\u6709\u4ec0\u4e48\uff1f"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u5206\u6790\u7684\u6570\u636e"}),"\n",(0,l.jsx)(n.li,{children:"\u5c55\u793a\u6570\u636e\u7684\u9875\u9762"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u786e\u8ba4\u6267\u884c\u9636\u6bb5",children:"\u786e\u8ba4\u6267\u884c\u9636\u6bb5"}),"\n",(0,l.jsx)(n.p,{children:"\u8981\u6709\u5206\u6790\u7684\u6570\u636e\uff0c\u90a3\u4e48\u5c31\u8981\u5148\u786e\u5b9a\u5728\u54ea\u4e2a\u9636\u6bb5\u8fdb\u884c\u83b7\u53d6\uff0c\u6211\u4eec\u77e5\u9053\u5728\u6574\u4e2a webpack \u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0ccompilation \u8d1f\u8d23\u6bcf\u4e00\u6b21\u7684\u6a21\u5757\u7684\u7f16\u8bd1\u3002\u53ea\u6709\u7b49 compilation \u7ed3\u675f\u4e4b\u540e\uff0c\u6211\u4eec\u624d\u80fd\u591f\u62ff\u5230\u6a21\u5757\u7f16\u8bd1\u7684\u7ed3\u679c\u3002\u6839\u636e\u8fd9\u4e2a\u6211\u4eec\u5c31\u53ef\u4ee5\u53bb\u627e\u5728\u54ea\u4e2a\u751f\u547d\u5468\u671f compilation \u7ed3\u675f\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 compiler \u7684 done \u751f\u547d\u5468\u671f\u94a9\u5b50\uff0c\u5728 compilation \u5b8c\u6210\u65f6\u6267\u884c\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:t(8647).A+"",width:"427",height:"158"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"class AnalyzerPlugin {\n    apply(compiler) {\n        compiler.hooks.done.tapAsync('analyzerPlugin', (stats, callback) => {\n\n\t\t  });\n    }\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u83b7\u53d6\u5206\u6790\u6570\u636e",children:"\u83b7\u53d6\u5206\u6790\u6570\u636e"}),"\n",(0,l.jsx)(n.p,{children:"Webpack \u53ef\u5206\u6790\u7684\u6570\u636e\u6709\u975e\u5e38\u591a\u7684\uff0c\u6bd4\u5982\u65f6\u95f4\u3001chunk\u548cbundle\u7b49\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 done \u56de\u8c03\u4e2d\u8fd4\u56de\u7684 stats \u662f\u6709\u5305\u542b\u76f8\u5e94\u7684\u4fe1\u606f\u7684\uff0c\u8fd9\u91cc\u6211\u4eec\u4ee5\u6a21\u5757\u7684\u90e8\u5206\u4fe1\u606f\u4e3a\u4f8b\u8fdb\u884c\u5206\u6790\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"function getModules(stats) {\n    const modules = stats.toJson().modules.map(({ type, size, name, id, depth }) => {\n        return {\n            type,\n            size,\n            name,\n            id,\n            depth\n        };\n    });\n\n    return modules\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u5c55\u793a\u6570\u636e",children:"\u5c55\u793a\u6570\u636e"}),"\n",(0,l.jsxs)(n.p,{children:["\u5c55\u793a\u6570\u636e\u6709\u4e24\u79cd\u65b9\u5f0f\u3002\n\u7b2c\u4e00\u79cd\u5c31\u662f\u901a\u8fc7 ",(0,l.jsx)(n.code,{children:"console.log()"}),"\uff0c\u76f4\u63a5\u5728\u7ec8\u7aef\u8fdb\u884c\u5c55\u793a\uff0c\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u662f\u4e0d\u597d\u7528\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"class AnalyzerPlugin {\n    apply(compiler) {\n        compiler.hooks.done.tapAsync('analyzerPlugin', (stats, callback) => {\n\t\t\t  const modules = getModules(stats)\n\n\t\t\t  console.log(modules)\n\t\t  });\n    }\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u7b2c\u4e8c\u79cd\u5c31\u662f\u5728\u9875\u9762\u4e2d\u8fdb\u884c\u5c55\u793a\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u9996\u5148\u6211\u4eec\u901a\u8fc7 node \u7684 http \u6a21\u5757\u521b\u5efa\u4e00\u4e2a server\uff0c\u5185\u5bb9\u662f\u6211\u4eec\u81ea\u5b9a\u4e49\u7684 html \u6a21\u7248\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"function createServer(modules) {\n    const server = http.createServer((req, res) => {\n        if (req.method === 'GET' && req.url === '/') {\n            const html = renderViewer({\n                title: 'MyAnalyzerPlugin',\n                data: modules\n            });\n            res.writeHead(200, { 'Content-Type': 'text/html' });\n            res.end(html);\n        }\n    });\n\n    return server\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u542f\u52a8\u8fd9\u4e2a\u670d\u52a1\uff0c\u5e76\u901a\u8fc7 opener \u5728\u670d\u52a1\u542f\u52a8\u6210\u529f\u4e4b\u540e\u7684\u56de\u8c03\u91cc\uff0c\u81ea\u52a8\u6253\u5f00\u6d4f\u89c8\u5668\u9875\u9762\u8fdb\u884c\u5c55\u793a\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"function serverListen(server){\n    const port = 8888;\n    const host = '127.0.0.1';\n\n    server.listen(port, host, () => {\n        const url = `http://${host}:${port}`;\n        opener(url);\n    })\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u5b8c\u6574\u4ee3\u7801\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const http = require('http');\n\nconst opener = require('opener');\n\nclass AnalyzerPlugin {\n    apply(compiler) {\n        compiler.hooks.done.tapAsync('analyzerPlugin', (stats, callback) => {\n            const modules = getModules(stats)\n\n            const server = createServer(modules)     \n\n            serverListen(server)\n        });\n    }\n}\n\nfunction getModules(stats) {\n    const modules = stats.toJson().modules.map(({ type, size, name, id, depth }) => {\n        return {\n            type,\n            size,\n            name,\n            id,\n            depth\n        };\n    });\n\n    return modules\n}\n\nfunction createServer(modules) {\n    const server = http.createServer((req, res) => {\n        if (req.method === 'GET' && req.url === '/') {\n            const html = renderViewer({\n                title: 'MyAnalyzerPlugin',\n                data: modules\n            });\n            res.writeHead(200, { 'Content-Type': 'text/html' });\n            res.end(html);\n        }\n    });\n\n    return server\n}\n\nfunction serverListen(server){\n    const port = 8888;\n    const host = '127.0.0.1';\n\n    server.listen(port, host, () => {\n        const url = `http://${host}:${port}`;\n        opener(url);\n    })\n}\n\nfunction renderViewer({ title, data } = {}) {\n    return `<!DOCTYPE html>\n        <html>\n            <head>\n                <meta charset=\"UTF-8\" />\n                <meta\n                    name=\"viewport\"\n                    content=\"width=device-width, initial-scale=1\"\n                />\n                <title>${title}</title>\n            </head>\n            <body>\n                <div id=\"app\">\n                <table>\n                    <thead>\n                        <tr>\n                            <th>type</th>\n                            <th>size</th>\n                            <th>name</th>\n                            <th>id</th>\n                            <th>depth</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${data.map((item) => {\n                            return `<tr>\n                            <td>${item.type}</td>\n                            <td>${item.size}</td>\n                            <td>${item.name}</td>\n                            <td>${item.id}</td>\n                            <td>${item.depth}</td>\n                        </tr>`;\n                        })}\n                </tbody>\n                </table>\n                </div>\n            </body>\n        </html>`;\n}\n\nmodule.exports = AnalyzerPlugin;\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u6700\u7ec8\u7684\u6548\u679c\u5982\u4e0b\uff1a\n",(0,l.jsx)(n.img,{src:t(3245).A+"",width:"2840",height:"762"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53c2\u8003\u6587\u732e"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://webpack.docschina.org/concepts/plugins/",children:"https://webpack.docschina.org/concepts/plugins/"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/webpack-contrib/webpack-bundle-analyzer",children:"GitHub - webpack-contrib/webpack-bundle-analyzer: Webpack plugin and CLI utility that represents bundle content as convenient interactive zoomable treemap"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://tsejx.github.io/webpack-guidebook/infra/implementation-principle/plugin",children:"Plugin \u673a\u5236 - Webpack Guidebook"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://webpack.docschina.org/plugins/",children:"webpack plugin"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.RP)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(p,{...e})}):p(e)}},5680:(e,n,t)=>{t.d(n,{RP:()=>a});var l=t(6540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=l.createContext({}),a=function(e){var n=l.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},d=l.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),h=a(t),u=r,m=h["".concat(c,".").concat(u)]||h[u]||p[u]||i;return t?l.createElement(m,s(s({ref:n},d),{},{components:t})):l.createElement(m,s({ref:n},d))}));d.displayName="MDXCreateElement"},8647:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/compiler.done-36fda5421f3394a4b28442390f307c77.png"},3245:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/view-d8b0be39d7a3ee43f8919924a9ebdc9f.png"}}]);